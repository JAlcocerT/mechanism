---
import { Button } from "@/components/ui/button";

import { menu_items } from "@/config";

const pathname = new URL(Astro.request.url).pathname;
const pathname_part = pathname.split("/")[1];
---

<div class="flex gap-4">
  {
    menu_items.map((item) => {
      const basePath = import.meta.env.BASE_URL.replace(/\/$/, ''); // Remove trailing slash if present
      const fullHref = `${basePath}${item.href}`;
      const currentPath = `/${pathname_part}`;
      const itemPath = `/${item.href.split('/')[1]}`;
      const isActive = currentPath === itemPath || 
                     (currentPath === basePath && item.href === '/');
      
      return (
        <a href={fullHref}>
          <Button
            variant={isActive ? "secondary" : "ghost"}
            key={item.href}
            className={isActive ? "text-foreground" : "text-muted-foreground"}
            client:load
          >
            {item.title}
          </Button>
        </a>
      );
    })
  }
</div>
